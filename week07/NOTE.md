# 第七周总结

本周结束了浏览器工作原理部分的内容，开始了奇妙的重学CSS部分。接下来就开始记录我在前端训练营第七周的奇妙之旅吧。

## 浏览器工作原理——Layout

在第六周中，我们toy-browser已经拿到了一颗带CSS的DOM树（CSSOM），该开始对这棵树进行排版布局啦！

说到Layout，我们可能会想到正常流、float、position、display、flex、grid等术语，当然，这些也是浏览器布局的一部分，本周挑了一个比较稳定灵活的flex布局来讲解浏览器是怎么布局的。

谈起flex布局，我们脑海里应该会想到主轴与交叉轴的概念，如果是按照该布局，我们页面中的所有元素都会按照这两个轴依次排列布局的，下面就说说浏览器是如何实现flex布局的吧。

- 第一步 判断布局的的方向
- 第二步 处理元素换行
- 第三步 处理元素在主轴方向的对齐方式
- 第四步 处理元素在交叉轴方向的对齐方式

根据这几个步骤，浏览器实现flex布局的大致思路就这样子的啦，是不是觉得超级简单有点听不懂呀，听不懂就对了，还等着第二遍自己实现呢。:scream:

## 浏览器工作原理——Render

开局一个URL，经历了各种打怪升级，终于要把toy-browser最好的一面，Bitmap呈现给大家了。Render部分突出一个字——简单，不对，是两个字。:joy:

谁能把那张带有艺术气息的三色图展现出来，谁就能获得本次训练营拉力赛浏览器工作原理赛段的冠军。然而，过程太过坎坷，差点就倒在了冠军奖杯面前。

在这部分过程中，我们需要借助npm的images包，为我们搭建一个图形环境。接下来我们就简单了解一下浏览器是如何实现Render的吧。

- 第一步 绘制单个元素
- 第二步 绘制整颗DOM树

跟着老师的节奏，我们就可能看到那张三色图，可是，我咋没看到那张三色图捏。为什么我出来的是一颗DOM树？
图见文件中的p1.png

眼看赛段冠军与我失之交臂，绝望之时只好去组委会（2班）群里咨询热心人士。:roll_eyes: Eyes:结果，组委会的prief助教出来了，说：你的content-type要写成html。这句话让我反思一晚上没敢在群里出声，第二天我看了看我的文件，还自豪的和prief助教说我写的就是html呀，然后prief助教问我确定是这样子的吗？还把图片发到了群里，然后助教就把我的问题圈出来了，这时才发现，我写的content-type是text/plain。

总认为自己对的人永远都不知道自己的错，丢死人了。

感谢prief助教和灯火阑珊的帮助，感谢群里的各位同学，能和你们在一起共同学习是我的荣幸。

最终还是艰难的完成了本次赛段的任务，看到了心仪的三色图，我们是冠军！！！
图见文件中的p2.png

## 重学CSS——Grammar

上周六开启了重学CSS部分的奇妙之旅，按照学习一门语言的惯例，还是要先从语法入手。

CSS的语法包括两个部分，一个部分是At-rules，另一个部分是rules。在这节课上，我学到了使用代码爬取w3c上的所有css标准名称以及url，下节课我们将爬取每个文档中的property了，好期待。

## 总结
toy-browser项目是一个很有针对性小实验，包括了状态机，flex算法等内容，想要真正了解浏览器工作原理，光听winter老师讲照着老师的代码抄一遍还是不够的，还要深究里面代码的各个细节，自己再写一遍甚至几遍才能了解其中的奥秘。后面自己写一遍toy-browser并把每一个步骤都记录在博客中，祝我成功！